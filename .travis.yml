language: node_js
cache:
  directories:
    - node_modules
node_js:
  - "8"
  - "7"
  - "6"
  - "4"
sudo: required
services:
  - docker
env:
  global:
    # - DEBUG=kafka-node:*
    - KAFKA_ADVERTISED_HOST_NAME=127.0.0.1
before_install:
  - docker --version
  - sudo apt-get update
  - sudo apt-get -y -o Dpkg::Options::="--force-confnew" install docker-ce
  - docker-compose up -d
before_script:
  - npm prune
after_failure:
  - docker ps
  - docker-compose logs
after_success:
  - cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js
